<div id="videoContainer" style="max-width: 500px; margin: auto; text-align: center; font-family: sans-serif; background: #1a1a1a; padding: 20px; border-radius: 15px; color: white;">
    
    <h3 id="statusText">جاري تجهيز الفيديو... (0%)</h3>
    
    <div style="width: 100%; background: #333; height: 12px; border-radius: 6px; margin-bottom: 20px; overflow: hidden;">
        <div id="bufferedBar" style="width: 0%; background: #28a745; height: 100%; transition: 0.3s;"></div>
    </div>

    <video id="myVideo" width="100%" controls preload="auto" style="display: none; border-radius: 10px;">
        <source src="رابط_الفيديو_المباشر_هنا" type="video/mp4">
    </video>

    <p id="infoText" style="font-size: 12px; color: #aaa;">يرجى الانتظار حتى يكتمل الخط الأخضر لتتمكن من المشاهدة بدون نت</p>
</div>

<script>
    const video = document.getElementById('myVideo');
    const bufferedBar = document.getElementById('bufferedBar');
    const statusText = document.getElementById('statusText');
    const infoText = document.getElementById('infoText');

    // مراقبة تحميل الفيديو في الذاكرة (Buffering)
    video.addEventListener('progress', () => {
        if (video.buffered.length > 0) {
            const bufferedEnd = video.buffered.end(video.buffered.length - 1);
            const duration = video.duration;
            if (duration > 0) {
                const percent = (bufferedEnd / duration) * 100;
                bufferedBar.style.width = percent + '%';
                statusText.innerText = `جاري التحميل... (${Math.round(percent)}%)`;

                // إذا اكتمل التحميل 100%
                if (percent >= 99) {
                    statusText.innerText = "✅ اكتمل التحميل! يمكنك المشاهدة الآن";
                    statusText.style.color = "#28a745";
                    video.style.display = "block"; // إظهار الفيديو
                    infoText.innerText = "الفيديو الآن محمل في الذاكرة، يمكنك إغلاق النت والمشاهدة طالما الصفحة مفتوحة.";
                }
            }
        }
    });

    // تنبيه في حال وجود خطأ في الرابط
    video.addEventListener('error', () => {
        statusText.innerText = "❌ خطأ في رابط الفيديو أو الحجم كبير جداً";
        statusText.style.color = "#ff4444";
    });
</script>
